<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í˜ë¥´ì†Œë‚˜ ë™í™” ì„œë¹„ìŠ¤ - UI í”„ë¡œí† íƒ€ì…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        * {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .chat-message {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .page-turn {
            transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
        }
        
        .page-turn:hover {
            transform: scale(1.02);
        }
        
        .character-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .storybook-page {
            background: linear-gradient(to bottom, #fefefe 0%, #f9f9f9 100%);
            box-shadow: inset 0 0 30px rgba(0,0,0,0.05);
        }
        
        .choice-button {
            transition: all 0.3s ease;
        }
        
        .choice-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .character-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .character-card:hover {
            transform: scale(1.05);
        }
        
        .character-card.selected {
            border: 3px solid #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }
    </style>
</head>
<body class="bg-gray-50 overflow-hidden">
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // ìºë¦­í„° ë°ì´í„°
        const characters = [
            {
                id: 1,
                name: 'ë½€ë¡œë¡œ',
                emoji: 'ğŸ§',
                color: 'from-blue-400 to-cyan-400',
                voice: 'ë°ê³  í™œê¸°ì°¬ ëª©ì†Œë¦¬',
                bgColor: 'bg-blue-50'
            },
            {
                id: 2,
                name: 'ì—˜ì‚¬',
                emoji: 'â„ï¸',
                color: 'from-cyan-300 to-blue-300',
                voice: 'ì°¨ë¶„í•˜ê³  ìš°ì•„í•œ ëª©ì†Œë¦¬',
                bgColor: 'bg-cyan-50'
            },
            {
                id: 3,
                name: 'í† í† ë¡œ',
                emoji: 'ğŸŒ³',
                color: 'from-green-400 to-emerald-400',
                voice: 'ë”°ëœ»í•˜ê³  í¬ê·¼í•œ ëª©ì†Œë¦¬',
                bgColor: 'bg-green-50'
            },
            {
                id: 4,
                name: 'í”¼ì¹´ì¸„',
                emoji: 'âš¡',
                color: 'from-yellow-400 to-orange-400',
                voice: 'ê·€ì—½ê³  ì¥ë‚œìŠ¤ëŸ¬ìš´ ëª©ì†Œë¦¬',
                bgColor: 'bg-yellow-50'
            }
        ];
        
        // ë™í™” í˜ì´ì§€ ë°ì´í„°
        const storyPages = [
            {
                page: 1,
                text: "ì˜›ë‚  ì˜›ì , í‘¸ë¥¸ ë°”ë‹¤ ë„ˆë¨¸ ì‘ì€ ì„¬ì— ìš©ê°í•œ íƒí—˜ê°€ ì¹œêµ¬ê°€ ì‚´ê³  ìˆì—ˆì–´ìš”.",
                image: "ğŸï¸",
                choices: null
            },
            {
                page: 2,
                text: "ì–´ëŠ ë‚  í•˜ëŠ˜ì—ì„œ ë°˜ì§ì´ëŠ” ë³„ë˜¥ë³„ì´ ë–¨ì–´ì§€ëŠ” ê²ƒì„ ë³´ì•˜ì–´ìš”. ì–´ë””ë¡œ ë–¨ì–´ì¡Œì„ê¹Œìš”?",
                image: "â­",
                choices: [
                    { text: "ìˆ² ì†ìœ¼ë¡œ ë–¨ì–´ì¡Œì–´ìš”", next: 3 },
                    { text: "ë°”ë‹·ê°€ë¡œ ë–¨ì–´ì¡Œì–´ìš”", next: 4 }
                ]
            },
            {
                page: 3,
                text: "ê¹Šì€ ìˆ² ì†ìœ¼ë¡œ ë“¤ì–´ê°€ë‹ˆ ì‹ ë¹„ë¡œìš´ ë¹›ì´ ë‚˜ëŠ” í¬ë¦¬ìŠ¤íƒˆì„ ë°œê²¬í–ˆì–´ìš”!",
                image: "ğŸ’",
                choices: null
            },
            {
                page: 4,
                text: "ë°”ë‹·ê°€ì—ì„œ ë°˜ì§ì´ëŠ” ì¡°ê°œê»ì§ˆ ì†ì— ë§ˆë²•ì˜ ì§„ì£¼ë¥¼ ì°¾ì•˜ì–´ìš”!",
                image: "ğŸš",
                choices: null
            }
        ];
        
        function App() {
            const [selectedCharacter, setSelectedCharacter] = useState(null);
            const [currentPage, setCurrentPage] = useState(1);
            const [messages, setMessages] = useState([]);
            const [isPlaying, setIsPlaying] = useState(false);
            const chatEndRef = useRef(null);
            
            useEffect(() => {
                if (selectedCharacter && messages.length === 0) {
                    setTimeout(() => {
                        addMessage('character', `ì•ˆë…•! ë‚˜ëŠ” ${selectedCharacter.name}ì•¼! ì˜¤ëŠ˜ì€ ì–´ë–¤ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì¤„ê¹Œ?`);
                    }, 500);
                }
            }, [selectedCharacter]);
            
            useEffect(() => {
                chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);
            
            const addMessage = (type, text) => {
                setMessages(prev => [...prev, { type, text, id: Date.now() }]);
            };
            
            const handleCharacterSelect = (character) => {
                setSelectedCharacter(character);
                setMessages([]);
            };
            
            const handleStartStory = () => {
                setIsPlaying(true);
                setCurrentPage(1);
                addMessage('character', 'ì¢‹ì•„! ê·¸ëŸ¼ ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•´ë³¼ê¹Œ?');
                setTimeout(() => {
                    addMessage('character', storyPages[0].text);
                }, 1000);
            };
            
            const handleChoice = (choice) => {
                addMessage('user', choice.text);
                setTimeout(() => {
                    setCurrentPage(choice.next);
                    const nextPage = storyPages.find(p => p.page === choice.next);
                    addMessage('character', nextPage.text);
                }, 800);
            };
            
            const handleNextPage = () => {
                if (currentPage < storyPages.length) {
                    setCurrentPage(currentPage + 1);
                    const nextPageData = storyPages.find(p => p.page === currentPage + 1);
                    if (nextPageData) {
                        addMessage('character', nextPageData.text);
                    }
                }
            };
            
            const currentStoryPage = storyPages.find(p => p.page === currentPage);
            
            return (
                <div className="h-screen flex bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50">
                    {/* ì¢Œì¸¡ íŒ¨ë„: ìºë¦­í„° ì„ íƒ + ì±„íŒ… */}
                    <div className="w-96 bg-white shadow-2xl flex flex-col">
                        {/* í—¤ë” */}
                        <div className="bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white">
                            <h1 className="text-2xl font-bold mb-2">âœ¨ ë§ˆë²• ë™í™”ë‚˜ë¼</h1>
                            <p className="text-sm opacity-90">ì¹œêµ¬ì™€ í•¨ê»˜í•˜ëŠ” ì‹ ë‚˜ëŠ” ëª¨í—˜</p>
                        </div>
                        
                        {/* ìºë¦­í„° ì„ íƒ */}
                        {!selectedCharacter ? (
                            <div className="p-6 flex-1 overflow-auto">
                                <h2 className="text-lg font-bold mb-4 text-gray-800">ì¹œêµ¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!</h2>
                                <div className="grid grid-cols-2 gap-4">
                                    {characters.map(char => (
                                        <div
                                            key={char.id}
                                            onClick={() => handleCharacterSelect(char)}
                                            className={`character-card p-4 rounded-2xl border-2 border-gray-200 text-center ${char.bgColor}`}
                                        >
                                            <div className="text-5xl mb-2">{char.emoji}</div>
                                            <div className="font-bold text-gray-800">{char.name}</div>
                                            <div className="text-xs text-gray-600 mt-1">{char.voice}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ) : (
                            <>
                                {/* ì„ íƒëœ ìºë¦­í„° ì •ë³´ */}
                                <div className={`p-4 ${selectedCharacter.bgColor} border-b-2 border-gray-200`}>
                                    <div className="flex items-center gap-3">
                                        <div className="text-4xl">{selectedCharacter.emoji}</div>
                                        <div className="flex-1">
                                            <div className="font-bold text-gray-800">{selectedCharacter.name}</div>
                                            <div className="text-xs text-gray-600">{selectedCharacter.voice}</div>
                                        </div>
                                        <button
                                            onClick={() => setSelectedCharacter(null)}
                                            className="text-gray-500 hover:text-gray-700"
                                        >
                                            âœ•
                                        </button>
                                    </div>
                                </div>
                                
                                {/* ì±„íŒ… ì˜ì—­ */}
                                <div className="flex-1 overflow-auto p-4 space-y-3">
                                    {messages.map(msg => (
                                        <div
                                            key={msg.id}
                                            className={`chat-message flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}
                                        >
                                            <div className={`max-w-[80%] rounded-2xl p-3 ${
                                                msg.type === 'user'
                                                    ? 'bg-blue-500 text-white'
                                                    : `bg-gradient-to-r ${selectedCharacter.color} text-white`
                                            }`}>
                                                {msg.type === 'character' && (
                                                    <div className="text-2xl mb-1">{selectedCharacter.emoji}</div>
                                                )}
                                                <div className="text-sm">{msg.text}</div>
                                            </div>
                                        </div>
                                    ))}
                                    
                                    {/* ì„ íƒì§€ ë²„íŠ¼ë“¤ */}
                                    {currentStoryPage?.choices && (
                                        <div className="space-y-2 pt-2">
                                            {currentStoryPage.choices.map((choice, idx) => (
                                                <button
                                                    key={idx}
                                                    onClick={() => handleChoice(choice)}
                                                    className="choice-button w-full p-3 bg-white border-2 border-purple-300 rounded-xl text-gray-800 font-medium hover:bg-purple-50"
                                                >
                                                    {choice.text}
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                    
                                    <div ref={chatEndRef} />
                                </div>
                                
                                {/* í•˜ë‹¨ ì»¨íŠ¸ë¡¤ */}
                                <div className="p-4 border-t-2 border-gray-200 bg-gray-50">
                                    {!isPlaying ? (
                                        <button
                                            onClick={handleStartStory}
                                            className="w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold hover:shadow-lg transition-all"
                                        >
                                            ğŸ¬ ì´ì•¼ê¸° ì‹œì‘í•˜ê¸°
                                        </button>
                                    ) : (
                                        <div className="flex gap-2">
                                            <button className="flex-1 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-all">
                                                â¸ï¸ ì¼ì‹œì •ì§€
                                            </button>
                                            <button className="flex-1 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all">
                                                ğŸ”Š ìŒì„± ON
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </>
                        )}
                    </div>
                    
                    {/* ì¤‘ì•™ íŒ¨ë„: 3D ìºë¦­í„° ë·°ì–´ */}
                    <div className="flex-1 flex items-center justify-center p-8">
                        <div className="w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded-3xl shadow-2xl flex items-center justify-center overflow-hidden relative">
                            {selectedCharacter ? (
                                <>
                                    {/* ë°°ê²½ ì¥ì‹ */}
                                    <div className="absolute inset-0 opacity-10">
                                        <div className="absolute top-10 left-10 text-6xl">âœ¨</div>
                                        <div className="absolute top-20 right-20 text-5xl">ğŸŒŸ</div>
                                        <div className="absolute bottom-20 left-20 text-5xl">ğŸ’«</div>
                                        <div className="absolute bottom-10 right-10 text-6xl">â­</div>
                                    </div>
                                    
                                    {/* ìºë¦­í„° (3D ëŒ€ì‹  í° ì´ëª¨ì§€) */}
                                    <div className="relative z-10">
                                        <div className={`text-[20rem] character-pulse ${isPlaying ? 'animate-bounce' : ''}`}>
                                            {selectedCharacter.emoji}
                                        </div>
                                        {isPlaying && (
                                            <div className="absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-white px-6 py-2 rounded-full shadow-lg">
                                                <div className="flex items-center gap-2">
                                                    <div className="w-2 h-2 bg-red-500 rounded-full animate-ping"></div>
                                                    <span className="text-sm font-medium text-gray-700">ë§í•˜ëŠ” ì¤‘...</span>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                    
                                    {/* ê°ì • í‘œì‹œê¸° */}
                                    <div className="absolute top-6 right-6 bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg">
                                        <div className="text-xs text-gray-600 mb-2">í˜„ì¬ ê°ì •</div>
                                        <div className="flex gap-2">
                                            <div className="w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center text-xl">ğŸ˜Š</div>
                                            <div className="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-xl opacity-50">ğŸ˜®</div>
                                            <div className="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-xl opacity-50">ğŸ˜¢</div>
                                        </div>
                                    </div>
                                </>
                            ) : (
                                <div className="text-center text-gray-400">
                                    <div className="text-6xl mb-4">ğŸ­</div>
                                    <p className="text-xl">ìºë¦­í„°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                                </div>
                            )}
                        </div>
                    </div>
                    
                    {/* ìš°ì¸¡ íŒ¨ë„: ë™í™”ì±… ë·°ì–´ */}
                    <div className="w-[500px] bg-white shadow-2xl flex flex-col">
                        {/* í—¤ë” */}
                        <div className="bg-gradient-to-r from-amber-500 to-orange-500 p-6 text-white">
                            <h2 className="text-xl font-bold mb-1">ğŸ“– ë™í™”ì±…</h2>
                            <p className="text-sm opacity-90">í˜ì´ì§€ {currentPage} / {storyPages.length}</p>
                        </div>
                        
                        {/* ë™í™”ì±… í˜ì´ì§€ */}
                        <div className="flex-1 overflow-auto p-8">
                            {currentStoryPage ? (
                                <div className="storybook-page rounded-2xl p-8 h-full">
                                    {/* í˜ì´ì§€ ë²ˆí˜¸ */}
                                    <div className="text-right text-sm text-gray-400 mb-4">
                                        {currentPage}
                                    </div>
                                    
                                    {/* ì¼ëŸ¬ìŠ¤íŠ¸ */}
                                    <div className="text-center mb-8">
                                        <div className="text-9xl mb-4 page-turn">{currentStoryPage.image}</div>
                                    </div>
                                    
                                    {/* í…ìŠ¤íŠ¸ */}
                                    <div className="text-xl leading-relaxed text-gray-800 text-center mb-8">
                                        {currentStoryPage.text}
                                    </div>
                                    
                                    {/* í˜ì´ì§€ ì§„í–‰ í‘œì‹œ */}
                                    <div className="flex justify-center gap-2 mt-8">
                                        {storyPages.map((_, idx) => (
                                            <div
                                                key={idx}
                                                className={`w-2 h-2 rounded-full transition-all ${
                                                    idx + 1 === currentPage
                                                        ? 'bg-orange-500 w-6'
                                                        : idx + 1 < currentPage
                                                        ? 'bg-orange-300'
                                                        : 'bg-gray-300'
                                                }`}
                                            />
                                        ))}
                                    </div>
                                </div>
                            ) : (
                                <div className="flex items-center justify-center h-full text-gray-400">
                                    <div className="text-center">
                                        <div className="text-6xl mb-4">ğŸ“š</div>
                                        <p className="text-lg">ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•˜ë©´<br />ì—¬ê¸°ì— ë™í™”ê°€ ë‚˜íƒ€ë‚˜ìš”</p>
                                    </div>
                                </div>
                            )}
                        </div>
                        
                        {/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}
                        {isPlaying && currentStoryPage && (
                            <div className="p-4 border-t-2 border-gray-200 bg-gray-50">
                                <div className="flex justify-between items-center">
                                    <button
                                        disabled={currentPage === 1}
                                        className="px-6 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
                                    >
                                        â† ì´ì „
                                    </button>
                                    
                                    {!currentStoryPage.choices && (
                                        <button
                                            onClick={handleNextPage}
                                            disabled={currentPage === storyPages.length}
                                            className="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all"
                                        >
                                            ë‹¤ìŒ â†’
                                        </button>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>